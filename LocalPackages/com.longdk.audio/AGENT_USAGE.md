# LongDK Audio System

## Role
Provides a robust audio management system with support for Music (cross-fading), SFX (2D & 3D spatial), and UI sounds, backed by Unity's AudioMixer.

## Dependencies
- `com.longdk.core` (for Singleton)
- `com.longdk.debug` (for Logging)

## Core Components
- `LongDK.Audio.AudioManager`: The main entry point (Singleton).
- `LongDK.Audio.AudioConfig`: ScriptableObject for default settings (Mixer reference, pool size).

## Usage

### 1. Setup
1. Create a `LongDK Audio Config` asset (Create > LongDK > Audio > Config).
2. Assign your AudioMixer and Groups (Master, Music, SFX, UI).
3. Drag the `AudioManager` prefab into your scene (or ensure it's created at runtime with the config).

### 2. Playing Music (Cross-fade)
```csharp
// Plays music, fading out the old track over 1.0 second
AudioManager.Instance.PlayMusic(myMusicClip, fadeDuration: 1.0f, loop: true);

// Stop music with fade
AudioManager.Instance.StopMusic(fadeDuration: 2.0f);
```

### 3. Playing SFX (2D)
```csharp
// Simple fire-and-forget 2D sound
AudioManager.Instance.PlaySFX(explosionClip);
```

### 4. Playing SFX (3D Spatial)
```csharp
// Plays sound at a specific position using a pooled AudioSource
AudioSource source = AudioManager.Instance.PlaySFX(explosionClip, transform.position);

// You can stop it manually if needed (though it auto-returns to pool when finished)
if (source != null) source.Stop();
```

### 5. Volume Control
```csharp
// Sets volume (0.0 to 1.0) which maps to Mixer decibels
AudioManager.Instance.SetMusicVolume(0.5f);
```

### 6. Using the Audio Library (Recommended)
1. Create an `AudioLibrary` asset (Create > LongDK > Audio > Library).
2. Assign it to the `AudioManager` inspector.
3. Use the custom inspector on the Library asset to add new IDs (e.g., "Explosion").
4. Assign clips to the new ID.
5. Play via ID:
```csharp
AudioManager.Instance.PlaySFX(AudioID.Explosion);
```

## Architecture
- **Pooling:** 3D sounds use a pool of `AudioSource` components to avoid instantiation lag.
- **Mixer:** Uses exposed parameters on the AudioMixer for volume control. Ensure your Mixer exposes parameters named `MasterVolume`, `MusicVolume`, `SFXVolume`, `UIVolume`.
- **Library:** The `AudioID` enum is auto-generated by the `AudioLibraryEditor` tool.
